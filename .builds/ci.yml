---
image: 'archlinux'
packages:
  - 'go'
  - 'make'
sources:
  - https://git.sr.ht/~jamesponddotco/bunnystorage-go
secrets:
  -  47377eb8-847b-45ae-a96e-c2e42ce9adea # Bunny.net API keys
tasks:
  - setup: |
      cd bunnystorage-go
      make init
  - lint: |
      cd bunnystorage-go
      export PATH="${HOME}/go/bin:${PATH}"
      make lint
  - test: |
      cd bunnystorage-go
      set +x
      source "${HOME}/bunnynet"
      set -x
      make test
